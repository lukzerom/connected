{"ast":null,"code":"var _jsxFileName = \"/Users/lukaszzeromski/Desktop/conntected/connected/client/src/components/layout/ReservationDialog.jsx\";\nimport React, { useState, useContext, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport { DialogActions, DialogContent } from \"@material-ui/core\";\nimport MuiDialogTitle from \"@material-ui/core/DialogTitle\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport ReservationContext from \"../../context/reservations/reservationContext\";\nimport StationContext from \"../../context/stations/stationContext\";\nimport CarSelect from \"../layout/CarSelect\";\nimport moment from \"moment\";\nconst useStyles = makeStyles(theme => ({\n  stationsWrapper: {\n    backgroundColor: \"#f5f5f5\",\n    minHeight: \"100vh\",\n    width: \"100%\"\n  },\n  root: {\n    margin: 0,\n    padding: theme.spacing(2)\n  },\n  closeButton: {\n    position: \"absolute\",\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500]\n  },\n  dialogContent: {\n    padding: theme.spacing(2)\n  },\n  divider: {\n    margin: \"1rem 0;\"\n  },\n  price: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"space-around\"\n  }\n}));\n\nconst ReservationDialog = () => {\n  const [alert, setAlert] = useState(false);\n  const reservationContext = useContext(ReservationContext);\n  const stationContext = useContext(StationContext);\n  const {\n    dateFrom,\n    dateTo,\n    carId,\n    isReservationModalOpen,\n    toggleReservationModal,\n    addReservation\n  } = reservationContext;\n  const {\n    station,\n    getAvailableStations\n  } = stationContext;\n  useEffect(() => {});\n  const classes = useStyles();\n  const from = moment(dateFrom).format(\"YYYY-MM-DD HH:00\");\n  const to = moment(dateTo).format(\"YYYY-MM-DD HH:00\");\n  const duration = moment.duration(moment(dateTo).diff(moment(dateFrom)));\n  const durationHours = Math.round(duration.asHours());\n\n  const handleClose = () => {\n    toggleReservationModal(false);\n  };\n\n  const handleBook = async () => {\n    let reservation = {\n      timeStampFrom: dateFrom,\n      timeStampTo: dateTo,\n      carId,\n      id: station._id\n    };\n\n    if (dateFrom === dateTo) {\n      setAlert(true);\n      const interval = window.setInterval(() => {\n        setAlert(false);\n        clearInterval(interval);\n      }, 5000);\n      return;\n    }\n\n    toggleReservationModal(false);\n    await addReservation(reservation);\n    await getAvailableStations(reservation.timeStampFrom, reservation.timeStampTo);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Dialog, {\n    onClose: handleClose,\n    \"aria-labelledby\": \"customized-dialog-title\",\n    open: isReservationModalOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(MuiDialogTitle, {\n    disableTypography: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, \"Confirm data and pick your car\"), /*#__PURE__*/React.createElement(IconButton, {\n    \"aria-label\": \"close\",\n    className: classes.closeButton,\n    onClick: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CloseIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(DialogContent, {\n    dividers: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    xs: 6,\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }, \"Date from: \"), \" \", from)), /*#__PURE__*/React.createElement(Grid, {\n    xs: 6,\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 17\n    }\n  }, \"Date to :\"), \" \", to))), /*#__PURE__*/React.createElement(Divider, {\n    className: classes.divider,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    xs: 4,\n    item: true,\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CarSelect, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    xs: 8,\n    item: true,\n    className: classes.price,\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 15\n    }\n  }, station === undefined ? null : `Total : ${durationHours} h * ${station.price} EUR = appx\n              ${durationHours * station.price} EUR`))), /*#__PURE__*/React.createElement(Divider, {\n    className: classes.divider,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 11\n    }\n  }, \"Station reservation is preliminary and requires the owner's approval. Settlement takes place outside the application so take some cash with you.\"), alert ? /*#__PURE__*/React.createElement(Alert, {\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  }, \"Please enter a valid date range\") : null), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    autoFocus: true,\n    onClick: handleBook,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 11\n    }\n  }, \"Book\"))));\n};\n\nexport default ReservationDialog;","map":{"version":3,"sources":["/Users/lukaszzeromski/Desktop/conntected/connected/client/src/components/layout/ReservationDialog.jsx"],"names":["React","useState","useContext","useEffect","makeStyles","Button","Divider","Dialog","DialogActions","DialogContent","MuiDialogTitle","IconButton","CloseIcon","Typography","Grid","Alert","ReservationContext","StationContext","CarSelect","moment","useStyles","theme","stationsWrapper","backgroundColor","minHeight","width","root","margin","padding","spacing","closeButton","position","right","top","color","palette","grey","dialogContent","divider","price","display","flexDirection","justifyContent","ReservationDialog","alert","setAlert","reservationContext","stationContext","dateFrom","dateTo","carId","isReservationModalOpen","toggleReservationModal","addReservation","station","getAvailableStations","classes","from","format","to","duration","diff","durationHours","Math","round","asHours","handleClose","handleBook","reservation","timeStampFrom","timeStampTo","id","_id","interval","window","setInterval","clearInterval","undefined"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport { DialogActions, DialogContent } from \"@material-ui/core\";\r\nimport MuiDialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\nimport ReservationContext from \"../../context/reservations/reservationContext\";\r\nimport StationContext from \"../../context/stations/stationContext\";\r\nimport CarSelect from \"../layout/CarSelect\";\r\nimport moment from \"moment\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  stationsWrapper: {\r\n    backgroundColor: \"#f5f5f5\",\r\n    minHeight: \"100vh\",\r\n    width: \"100%\",\r\n  },\r\n  root: {\r\n    margin: 0,\r\n    padding: theme.spacing(2),\r\n  },\r\n  closeButton: {\r\n    position: \"absolute\",\r\n    right: theme.spacing(1),\r\n    top: theme.spacing(1),\r\n    color: theme.palette.grey[500],\r\n  },\r\n  dialogContent: {\r\n    padding: theme.spacing(2),\r\n  },\r\n  divider: {\r\n    margin: \"1rem 0;\",\r\n  },\r\n  price: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"space-around\",\r\n  },\r\n}));\r\n\r\nconst ReservationDialog = () => {\r\n  const [alert, setAlert] = useState(false);\r\n  const reservationContext = useContext(ReservationContext);\r\n  const stationContext = useContext(StationContext);\r\n\r\n  const {\r\n    dateFrom,\r\n    dateTo,\r\n    carId,\r\n    isReservationModalOpen,\r\n    toggleReservationModal,\r\n    addReservation,\r\n  } = reservationContext;\r\n\r\n  const { station, getAvailableStations } = stationContext;\r\n\r\n  useEffect(() => {});\r\n\r\n  const classes = useStyles();\r\n\r\n  const from = moment(dateFrom).format(\"YYYY-MM-DD HH:00\");\r\n  const to = moment(dateTo).format(\"YYYY-MM-DD HH:00\");\r\n  const duration = moment.duration(moment(dateTo).diff(moment(dateFrom)));\r\n  const durationHours = Math.round(duration.asHours());\r\n\r\n  const handleClose = () => {\r\n    toggleReservationModal(false);\r\n  };\r\n\r\n  const handleBook = async () => {\r\n    let reservation = {\r\n      timeStampFrom: dateFrom,\r\n      timeStampTo: dateTo,\r\n      carId,\r\n      id: station._id,\r\n    };\r\n\r\n    if (dateFrom === dateTo) {\r\n      setAlert(true);\r\n      const interval = window.setInterval(() => {\r\n        setAlert(false);\r\n        clearInterval(interval);\r\n      }, 5000);\r\n      return;\r\n    }\r\n    toggleReservationModal(false);\r\n    await addReservation(reservation);\r\n    await getAvailableStations(\r\n      reservation.timeStampFrom,\r\n      reservation.timeStampTo\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        onClose={handleClose}\r\n        aria-labelledby=\"customized-dialog-title\"\r\n        open={isReservationModalOpen}\r\n      >\r\n        <MuiDialogTitle disableTypography>\r\n          <Typography variant=\"h6\">Confirm data and pick your car</Typography>\r\n\r\n          <IconButton\r\n            aria-label=\"close\"\r\n            className={classes.closeButton}\r\n            onClick={handleClose}\r\n          >\r\n            <CloseIcon />\r\n          </IconButton>\r\n        </MuiDialogTitle>\r\n\r\n        <DialogContent dividers>\r\n          <Grid container>\r\n            <Grid xs={6} item>\r\n              <Typography align=\"center\">\r\n                <strong>Date from: </strong> {from}\r\n              </Typography>\r\n            </Grid>\r\n            <Grid xs={6} item>\r\n              <Typography align=\"center\">\r\n                <strong>Date to :</strong> {to}\r\n              </Typography>\r\n            </Grid>\r\n          </Grid>\r\n          <Divider className={classes.divider} />\r\n          <Grid container>\r\n            <Grid xs={4} item align=\"center\">\r\n              <CarSelect />\r\n            </Grid>\r\n            <Grid xs={8} item className={classes.price} align=\"center\">\r\n              <Typography align=\"center\">\r\n                {station === undefined\r\n                  ? null\r\n                  : `Total : ${durationHours} h * ${station.price} EUR = appx\r\n              ${durationHours * station.price} EUR`}\r\n              </Typography>\r\n            </Grid>\r\n          </Grid>\r\n          <Divider className={classes.divider} />\r\n          <Typography>\r\n            Station reservation is preliminary and requires the owner's\r\n            approval. Settlement takes place outside the application so take\r\n            some cash with you.\r\n          </Typography>\r\n          {alert ? (\r\n            <Alert severity=\"error\">Please enter a valid date range</Alert>\r\n          ) : null}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button autoFocus onClick={handleBook} color=\"primary\">\r\n            Book\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReservationDialog;\r\n"]},"metadata":{},"sourceType":"module"}